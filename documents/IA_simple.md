# IA (ì •ë³´ êµ¬ì¡°) - ê°„ì†Œí™” ë²„ì „ (3ì‹œê°„ MVP)
## Shadow Lord Slayer TRPG

---

## ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë¬¸ì„œ ì œëª©** | Shadow Lord Slayer TRPG - ê°„ì†Œí™” IA |
| **ëª©í‘œ ê°œë°œ ì‹œê°„** | 3ì‹œê°„ |
| **ëŒ€ìƒ ë…ì** | í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì |
| **ì‘ì„±ì¼** | 2026ë…„ 1ì›” 29ì¼ |

---

## 1. ì‚¬ì´íŠ¸ êµ¬ì¡°

### 1.1 ì‚¬ì´íŠ¸ë§µ

```
/ (ë£¨íŠ¸ - ë©”ì¸ ì±—ë´‡ í˜ì´ì§€)
â””â”€â”€ ë‹¨ì¼ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ (SPA)
```

**ë³„ë„ ë¼ìš°íŒ… ì—†ìŒ** - ëª¨ë“  ê¸°ëŠ¥ì´ ë‹¨ì¼ í˜ì´ì§€ì—ì„œ ë™ì‘

### 1.2 ì œì™¸ëœ í˜ì´ì§€ (ì›ë³¸ ëŒ€ë¹„)

| ì›ë³¸ í˜ì´ì§€ | ì œì™¸ ì´ìœ  |
|-------------|-----------|
| /login | ë¡œê·¸ì¸ ê¸°ëŠ¥ ì œì™¸ |
| /signup | íšŒì›ê°€ì… ê¸°ëŠ¥ ì œì™¸ |
| /app/hub | ë¡œë¹„ ë¶ˆí•„ìš” (ë°”ë¡œ ê²Œì„ ì‹œì‘) |
| /app/game | ë©”ì¸ í˜ì´ì§€ê°€ ê²Œì„ í™”ë©´ |
| /app/settings | ì„¤ì • ê¸°ëŠ¥ ì œì™¸ |
| /app/history | Supabase Dashboard ì‚¬ìš© |

---

## 2. í˜ì´ì§€ ë ˆì´ì•„ì›ƒ

### 2.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Header                             â”‚
â”‚  (íƒ€ì´í‹€, ìƒˆ ê²Œì„ ë²„íŠ¼)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚                   Message Area                          â”‚
â”‚              (ì±„íŒ… ë©”ì‹œì§€ ëª©ë¡)                          â”‚
â”‚                                                         â”‚
â”‚                                                         â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Input Area                           â”‚
â”‚  (í…ìŠ¤íŠ¸ ì…ë ¥ì°½ + ì „ì†¡ ë²„íŠ¼)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ìŠ¤í¬í†± ë ˆì´ì•„ì›ƒ (768px ì´ìƒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° Shadow Lord Slayer                        [ìƒˆ ê²Œì„]      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ ğŸ­ GM                                     10:30 AM  â”‚  â”‚
â”‚    â”‚                                                     â”‚  â”‚
â”‚    â”‚ ğŸ° **ê·¸ë¦¼ì ì•„ì¹´ë°ë¯¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤**          â”‚  â”‚
â”‚    â”‚                                                     â”‚  â”‚
â”‚    â”‚ ë‹¹ì‹ ì€ ì˜¤ëŠ˜ ë§ˆë²• í•™êµ 'ê·¸ë¦¼ì ì•„ì¹´ë°ë¯¸'ì— ì…í•™í•œ       â”‚  â”‚
â”‚    â”‚ ì‹ ì…ìƒì…ë‹ˆë‹¤. ê³ ëŒ€ì˜ ì˜ˆì–¸ì— ë”°ë¥´ë©´...                 â”‚  â”‚
â”‚    â”‚                                                     â”‚  â”‚
â”‚    â”‚ 1. ğŸƒ ì„œë‘˜ëŸ¬ ëŒ€ê°•ë‹¹ìœ¼ë¡œ ë‹¬ë ¤ê°„ë‹¤                      â”‚  â”‚
â”‚    â”‚ 2. ğŸ” ì£¼ë³€ì„ ì‚´í”¼ë©° ì²œì²œíˆ ì´ë™í•œë‹¤                   â”‚  â”‚
â”‚    â”‚ 3. ğŸ“š ë¨¼ì € ë„ì„œê´€ì— ë“¤ëŸ¬ ì •ë³´ë¥¼ ì°¾ì•„ë³¸ë‹¤              â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                        â”‚                     ë‚˜ ğŸ‘¤       â”‚  â”‚
â”‚                        â”‚                                 â”‚  â”‚
â”‚                        â”‚ ëŒ€ê°•ë‹¹ìœ¼ë¡œ ë‹¬ë ¤ê°„ë‹¤              â”‚  â”‚
â”‚                        â”‚                       10:31 AM  â”‚  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ ğŸ­ GM                                     10:31 AM  â”‚  â”‚
â”‚    â”‚                                                     â”‚  â”‚
â”‚    â”‚ ë‹¹ì‹ ì€ ë³µë„ë¥¼ ì „ë ¥ìœ¼ë¡œ ë‹¬ë¦½ë‹ˆë‹¤. ë‹¤ë¥¸ í•™ìƒë“¤ë„        â”‚  â”‚
â”‚    â”‚ ë¶ˆì•ˆí•œ í‘œì •ìœ¼ë¡œ ëŒ€ê°•ë‹¹ ìª½ìœ¼ë¡œ í–¥í•˜ê³  ìˆìŠµë‹ˆë‹¤...       â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚    â³ GMì´ ìƒê° ì¤‘...                                        â”‚
â”‚                                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ë‹¹ì‹ ì˜ í–‰ë™ì„ ì…ë ¥í•˜ì„¸ìš”...                    â”‚ â”‚ ì „ì†¡â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë ˆì´ì•„ì›ƒ ìŠ¤í™:**
- ì „ì²´ ë„ˆë¹„: ìµœëŒ€ 800px, ì¤‘ì•™ ì •ë ¬
- í—¤ë” ë†’ì´: 60px
- ì…ë ¥ ì˜ì—­ ë†’ì´: 80px
- ë©”ì‹œì§€ ì˜ì—­: ë‚˜ë¨¸ì§€ ê³µê°„ (flex-grow)
- ì¢Œìš° íŒ¨ë”©: 24px

### 2.3 ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ (768px ë¯¸ë§Œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ° Shadow Lord Slayer  [ìƒˆ ê²Œì„]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ­ GM              10:30   â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ ê·¸ë¦¼ì ì•„ì¹´ë°ë¯¸ì— ì˜¤ì‹      â”‚ â”‚
â”‚ â”‚ ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤...          â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ 1. ì„œë‘˜ëŸ¬ ëŒ€ê°•ë‹¹ìœ¼ë¡œ       â”‚ â”‚
â”‚ â”‚ 2. ì£¼ë³€ì„ ì‚´í”¼ë©°...        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚       â”‚        ë‚˜ ğŸ‘¤ 10:31 â”‚   â”‚
â”‚       â”‚                    â”‚   â”‚
â”‚       â”‚ ëŒ€ê°•ë‹¹ìœ¼ë¡œ         â”‚   â”‚
â”‚       â”‚ ë‹¬ë ¤ê°„ë‹¤           â”‚   â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ­ GM              10:31   â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ ë‹¹ì‹ ì€ ë³µë„ë¥¼ ì „ë ¥ìœ¼ë¡œ... â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚
â”‚ â³ GMì´ ìƒê° ì¤‘...             â”‚
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”‚
â”‚ â”‚ í–‰ë™ ì…ë ¥...        â”‚ â”‚ì „ì†¡â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëª¨ë°”ì¼ ìŠ¤í™:**
- ì „ì²´ ë„ˆë¹„: 100%
- í—¤ë” ë†’ì´: 50px
- ì…ë ¥ ì˜ì—­ ë†’ì´: 70px (í‚¤ë³´ë“œ ê³ ë ¤)
- ì¢Œìš° íŒ¨ë”©: 16px
- ë©”ì‹œì§€ ë²„ë¸”: ìµœëŒ€ ë„ˆë¹„ 85%

---

## 3. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 3.1 í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # ë©”ì¸ í˜ì´ì§€ (ChatContainer ë Œë”ë§)
â”‚   â”œâ”€â”€ layout.tsx            # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (ë©”íƒ€ë°ì´í„°, í°íŠ¸)
â”‚   â”œâ”€â”€ globals.css           # ì „ì—­ ìŠ¤íƒ€ì¼ (Tailwind)
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ chat/
â”‚           â””â”€â”€ route.ts      # AI ì±—ë´‡ API ì—”ë“œí¬ì¸íŠ¸
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ChatContainer.tsx     # ì±„íŒ… ì „ì²´ ì»¨í…Œì´ë„ˆ
â”‚   â”œâ”€â”€ ChatHeader.tsx        # í—¤ë” (íƒ€ì´í‹€, ìƒˆ ê²Œì„ ë²„íŠ¼)
â”‚   â”œâ”€â”€ MessageList.tsx       # ë©”ì‹œì§€ ëª©ë¡ (ìŠ¤í¬ë¡¤ ì˜ì—­)
â”‚   â”œâ”€â”€ MessageItem.tsx       # ê°œë³„ ë©”ì‹œì§€ ë²„ë¸”
â”‚   â”œâ”€â”€ ChatInput.tsx         # ì…ë ¥ì°½ + ì „ì†¡ ë²„íŠ¼
â”‚   â”œâ”€â”€ LoadingIndicator.tsx  # ë¡œë”© í‘œì‹œ ("GMì´ ìƒê° ì¤‘...")
â”‚   â””â”€â”€ NewGameModal.tsx      # ìƒˆ ê²Œì„ í™•ì¸ ëª¨ë‹¬
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts           # Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ openai.ts             # OpenAI ì„¤ì • ë° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
â”‚   â””â”€â”€ utils.ts              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (ì„¸ì…˜ ID ë“±)
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useChat.ts            # ì±„íŒ… ìƒíƒœ ê´€ë¦¬ ì»¤ìŠ¤í…€ í›…
â”‚
â””â”€â”€ types/
    â””â”€â”€ index.ts              # TypeScript íƒ€ì… ì •ì˜
```

### 3.2 ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°

```
app/page.tsx
â””â”€â”€ ChatContainer
    â”œâ”€â”€ ChatHeader
    â”‚   â”œâ”€â”€ Logo/Title
    â”‚   â””â”€â”€ NewGameButton
    â”‚       â””â”€â”€ NewGameModal (ì¡°ê±´ë¶€ ë Œë”ë§)
    â”‚
    â”œâ”€â”€ MessageList
    â”‚   â”œâ”€â”€ MessageItem (GM ë©”ì‹œì§€)
    â”‚   â”œâ”€â”€ MessageItem (ì‚¬ìš©ì ë©”ì‹œì§€)
    â”‚   â”œâ”€â”€ MessageItem (GM ë©”ì‹œì§€)
    â”‚   â”œâ”€â”€ ...
    â”‚   â””â”€â”€ LoadingIndicator (ì¡°ê±´ë¶€ ë Œë”ë§)
    â”‚
    â””â”€â”€ ChatInput
        â”œâ”€â”€ TextArea
        â””â”€â”€ SendButton
```

### 3.3 ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ëª…ì„¸

#### 3.3.1 ChatContainer.tsx

**ì—­í• **: ì „ì²´ ì±„íŒ… UIì˜ ìµœìƒìœ„ ì»¨í…Œì´ë„ˆ

```typescript
interface ChatContainerProps {
  // props ì—†ìŒ - ë‚´ë¶€ì—ì„œ ìƒíƒœ ê´€ë¦¬
}

// ë‚´ë¶€ ìƒíƒœ
const [messages, setMessages] = useState<Message[]>([])
const [isLoading, setIsLoading] = useState(false)
const [sessionId, setSessionId] = useState<string>('')
const [showNewGameModal, setShowNewGameModal] = useState(false)
```

**ì£¼ìš” ê¸°ëŠ¥:**
- useChat í›…ì„ í†µí•œ ìƒíƒœ ê´€ë¦¬
- í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— props ì „ë‹¬
- ì„¸ì…˜ ì´ˆê¸°í™” ë° ì˜¤í”„ë‹ ë©”ì‹œì§€ ë¡œë“œ

**ìŠ¤íƒ€ì¼:**
```css
/* Tailwind í´ë˜ìŠ¤ */
.chat-container {
  @apply flex flex-col h-screen max-w-3xl mx-auto bg-gray-900;
}
```

#### 3.3.2 ChatHeader.tsx

**ì—­í• **: ê²Œì„ íƒ€ì´í‹€ê³¼ ìƒˆ ê²Œì„ ë²„íŠ¼ í‘œì‹œ

```typescript
interface ChatHeaderProps {
  onNewGame: () => void
  sessionId?: string // ë””ë²„ê¹…ìš© (ì„ íƒì )
}
```

**UI ìš”ì†Œ:**
- ê²Œì„ íƒ€ì´í‹€: "ğŸ° Shadow Lord Slayer"
- ìƒˆ ê²Œì„ ë²„íŠ¼: ìš°ì¸¡ ìƒë‹¨

**ìŠ¤íƒ€ì¼:**
```css
.chat-header {
  @apply flex justify-between items-center px-6 py-4
         bg-gray-800 border-b border-gray-700;
}

.title {
  @apply text-xl font-bold text-purple-400;
}

.new-game-button {
  @apply px-4 py-2 bg-purple-600 hover:bg-purple-700
         text-white rounded-lg transition-colors;
}
```

#### 3.3.3 MessageList.tsx

**ì—­í• **: ë©”ì‹œì§€ ëª©ë¡ì„ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì˜ì—­ì— í‘œì‹œ

```typescript
interface MessageListProps {
  messages: Message[]
  isLoading: boolean
}
```

**ì£¼ìš” ê¸°ëŠ¥:**
- ìƒˆ ë©”ì‹œì§€ ì¶”ê°€ ì‹œ ìë™ ìŠ¤í¬ë¡¤
- ë¡œë”© ìƒíƒœ í‘œì‹œ
- ë¹ˆ ìƒíƒœ ì²˜ë¦¬

**ìë™ ìŠ¤í¬ë¡¤ ë¡œì§:**
```typescript
const messagesEndRef = useRef<HTMLDivElement>(null)

useEffect(() => {
  messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
}, [messages])
```

**ìŠ¤íƒ€ì¼:**
```css
.message-list {
  @apply flex-1 overflow-y-auto px-4 py-6 space-y-4;
}
```

#### 3.3.4 MessageItem.tsx

**ì—­í• **: ê°œë³„ ë©”ì‹œì§€ ë²„ë¸” ë Œë”ë§

```typescript
interface MessageItemProps {
  message: Message
}

interface Message {
  id: string
  role: 'user' | 'assistant'
  content: string
  createdAt: Date
}
```

**UI ë¶„ê¸°:**
- `role === 'assistant'`: ì™¼ìª½ ì •ë ¬, ë³´ë¼ìƒ‰ ë°°ê²½, GM ì•„ì´ì½˜
- `role === 'user'`: ì˜¤ë¥¸ìª½ ì •ë ¬, íšŒìƒ‰ ë°°ê²½, ì‚¬ìš©ì ì•„ì´ì½˜

**ë§ˆí¬ë‹¤ìš´ ì§€ì›:**
- `**êµµì€ ê¸€ì”¨**` â†’ `<strong>`
- `*ê¸°ìš¸ì„*` â†’ `<em>`
- ì¤„ë°”ê¿ˆ ìœ ì§€

**ìŠ¤íƒ€ì¼:**
```css
/* GM ë©”ì‹œì§€ */
.message-gm {
  @apply flex gap-3 max-w-[80%];
}

.message-gm-bubble {
  @apply bg-purple-900/50 border border-purple-700
         rounded-2xl rounded-tl-none px-4 py-3 text-gray-100;
}

/* ì‚¬ìš©ì ë©”ì‹œì§€ */
.message-user {
  @apply flex gap-3 max-w-[80%] ml-auto flex-row-reverse;
}

.message-user-bubble {
  @apply bg-gray-700 border border-gray-600
         rounded-2xl rounded-tr-none px-4 py-3 text-gray-100;
}

/* íƒ€ì„ìŠ¤íƒ¬í”„ */
.timestamp {
  @apply text-xs text-gray-500 mt-1;
}
```

#### 3.3.5 ChatInput.tsx

**ì—­í• **: ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬

```typescript
interface ChatInputProps {
  onSend: (message: string) => void
  disabled: boolean
  maxLength?: number // ê¸°ë³¸ê°’: 500
}
```

**ì£¼ìš” ê¸°ëŠ¥:**
- Enter ì „ì†¡, Shift+Enter ì¤„ë°”ê¿ˆ
- ë¹ˆ ì…ë ¥ ë°©ì§€
- ê¸€ì ìˆ˜ ì œí•œ
- ë¡œë”© ì¤‘ ë¹„í™œì„±í™”

**ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬:**
```typescript
const handleKeyDown = (e: React.KeyboardEvent) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault()
    handleSend()
  }
}
```

**ìŠ¤íƒ€ì¼:**
```css
.chat-input-container {
  @apply flex gap-3 px-4 py-4 bg-gray-800 border-t border-gray-700;
}

.input-field {
  @apply flex-1 bg-gray-700 border border-gray-600 rounded-xl
         px-4 py-3 text-gray-100 placeholder-gray-400
         focus:outline-none focus:border-purple-500 resize-none;
}

.send-button {
  @apply px-6 py-3 bg-purple-600 hover:bg-purple-700
         disabled:bg-gray-600 disabled:cursor-not-allowed
         text-white rounded-xl font-medium transition-colors;
}
```

#### 3.3.6 LoadingIndicator.tsx

**ì—­í• **: AI ì‘ë‹µ ëŒ€ê¸° ì¤‘ í‘œì‹œ

```typescript
interface LoadingIndicatorProps {
  // props ì—†ìŒ
}
```

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ­ GM                                   â”‚
â”‚                                         â”‚
â”‚ â³ GMì´ ìƒê° ì¤‘...                       â”‚
â”‚ â— â— â— (ì• ë‹ˆë©”ì´ì…˜)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìŠ¤íƒ€ì¼:**
```css
.loading-indicator {
  @apply flex gap-3 max-w-[80%];
}

.loading-bubble {
  @apply bg-purple-900/30 border border-purple-700/50
         rounded-2xl rounded-tl-none px-4 py-3;
}

.loading-dots {
  @apply flex gap-1;
}

.loading-dot {
  @apply w-2 h-2 bg-purple-400 rounded-full animate-bounce;
}
```

#### 3.3.7 NewGameModal.tsx

**ì—­í• **: ìƒˆ ê²Œì„ ì‹œì‘ í™•ì¸ ëª¨ë‹¬

```typescript
interface NewGameModalProps {
  isOpen: boolean
  onConfirm: () => void
  onCancel: () => void
}
```

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚    ğŸ® ìƒˆ ê²Œì„ì„ ì‹œì‘í• ê¹Œìš”?      â”‚
â”‚                                 â”‚
â”‚    í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€        â”‚
â”‚    ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.           â”‚
â”‚    (Supabaseì— ì €ì¥ë¨)          â”‚
â”‚                                 â”‚
â”‚    [ì·¨ì†Œ]          [ìƒˆ ê²Œì„]    â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ìƒíƒœ ê´€ë¦¬

### 4.1 useChat ì»¤ìŠ¤í…€ í›…

```typescript
// hooks/useChat.ts

interface UseChatReturn {
  messages: Message[]
  isLoading: boolean
  sessionId: string
  sendMessage: (content: string) => Promise<void>
  startNewGame: () => void
}

function useChat(): UseChatReturn {
  const [messages, setMessages] = useState<Message[]>([])
  const [isLoading, setIsLoading] = useState(false)
  const [sessionId, setSessionId] = useState('')

  // ì„¸ì…˜ ì´ˆê¸°í™”
  useEffect(() => {
    const id = getOrCreateSessionId()
    setSessionId(id)
    loadInitialMessage(id)
  }, [])

  // ë©”ì‹œì§€ ì „ì†¡
  const sendMessage = async (content: string) => {
    // 1. ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
    // 2. Supabaseì— ì €ì¥
    // 3. API í˜¸ì¶œ
    // 4. AI ì‘ë‹µ ì¶”ê°€
    // 5. Supabaseì— ì €ì¥
  }

  // ìƒˆ ê²Œì„ ì‹œì‘
  const startNewGame = () => {
    const newId = generateNewSessionId()
    setSessionId(newId)
    setMessages([])
    loadInitialMessage(newId)
  }

  return { messages, isLoading, sessionId, sendMessage, startNewGame }
}
```

### 4.2 ìƒíƒœ íë¦„

```
[í˜ì´ì§€ ë¡œë“œ]
     â†“
[ì„¸ì…˜ ID í™•ì¸/ìƒì„±]
     â†“
[ì˜¤í”„ë‹ ë©”ì‹œì§€ ë¡œë“œ]
     â†“
[ëŒ€ê¸° ìƒíƒœ]
     â†“
[ì‚¬ìš©ì ì…ë ¥] â†’ [ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€] â†’ [Supabase ì €ì¥]
     â†“
[API í˜¸ì¶œ] â†’ [ë¡œë”© ìƒíƒœ ON]
     â†“
[AI ì‘ë‹µ ìˆ˜ì‹ ] â†’ [AI ë©”ì‹œì§€ ì¶”ê°€] â†’ [Supabase ì €ì¥]
     â†“
[ë¡œë”© ìƒíƒœ OFF]
     â†“
[ëŒ€ê¸° ìƒíƒœ]
```

---

## 5. ë°ì´í„° íë¦„

### 5.1 ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ChatInput  â”‚â”€â”€â”€â”€â†’â”‚   useChat   â”‚â”€â”€â”€â”€â†’â”‚  API Route  â”‚
â”‚  (ì‚¬ìš©ì    â”‚     â”‚  (ìƒíƒœê´€ë¦¬) â”‚     â”‚ /api/chat   â”‚
â”‚   ì…ë ¥)     â”‚     â”‚             â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                    â”‚
                           â†“                    â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Supabase   â”‚     â”‚   OpenAI    â”‚
                    â”‚  (ì €ì¥)     â”‚     â”‚   (ì‘ë‹µ)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 API Route ìƒì„¸

```typescript
// app/api/chat/route.ts

export async function POST(request: Request) {
  const { sessionId, message, history } = await request.json()

  // 1. ëŒ€í™” íˆìŠ¤í† ë¦¬ êµ¬ì„± (ìµœê·¼ 20ê°œ)
  const messages = [
    { role: 'system', content: SYSTEM_PROMPT },
    ...history.slice(-20),
    { role: 'user', content: message }
  ]

  // 2. OpenAI API í˜¸ì¶œ
  const completion = await openai.chat.completions.create({
    model: 'gpt-4o-mini',
    messages,
    max_tokens: 500,
    temperature: 0.8
  })

  // 3. ì‘ë‹µ ë°˜í™˜
  return Response.json({
    reply: completion.choices[0].message.content
  })
}
```

---

## 6. ë°˜ì‘í˜• ë””ìì¸

### 6.1 ë¸Œë ˆì´í¬í¬ì¸íŠ¸

| ë¸Œë ˆì´í¬í¬ì¸íŠ¸ | í™”ë©´ í¬ê¸° | ë ˆì´ì•„ì›ƒ ë³€í™” |
|----------------|-----------|---------------|
| **sm** | < 640px | ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ |
| **md** | 640px ~ 768px | íƒœë¸”ë¦¿ ë ˆì´ì•„ì›ƒ |
| **lg** | > 768px | ë°ìŠ¤í¬í†± ë ˆì´ì•„ì›ƒ |

### 6.2 ë°˜ì‘í˜• ë³€í™”

| ìš”ì†Œ | ëª¨ë°”ì¼ (< 768px) | ë°ìŠ¤í¬í†± (â‰¥ 768px) |
|------|------------------|-------------------|
| ì»¨í…Œì´ë„ˆ ë„ˆë¹„ | 100% | max-w-3xl (768px) |
| ì¢Œìš° íŒ¨ë”© | 16px | 24px |
| í—¤ë” ë†’ì´ | 50px | 60px |
| ë©”ì‹œì§€ ë²„ë¸” | ìµœëŒ€ 85% | ìµœëŒ€ 80% |
| ì…ë ¥ì°½ ë†’ì´ | 48px | 52px |
| í°íŠ¸ í¬ê¸° | 14px | 16px |
| íƒ€ì´í‹€ í¬ê¸° | 18px | 20px |

### 6.3 Tailwind í´ë˜ìŠ¤ ì˜ˆì‹œ

```tsx
// ChatContainer
<div className="flex flex-col h-screen w-full md:max-w-3xl md:mx-auto">

// MessageItem
<div className="max-w-[85%] md:max-w-[80%]">

// ChatInput
<textarea className="h-12 md:h-14 text-sm md:text-base">
```

---

## 7. ì ‘ê·¼ì„±

### 7.1 í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜

| í‚¤ | ë™ì‘ |
|----|------|
| Tab | ìš”ì†Œ ê°„ ì´ë™ (ì…ë ¥ì°½ â†’ ì „ì†¡ ë²„íŠ¼ â†’ ìƒˆ ê²Œì„ ë²„íŠ¼) |
| Enter | ë©”ì‹œì§€ ì „ì†¡ (ì…ë ¥ì°½ì—ì„œ) |
| Shift + Enter | ì¤„ë°”ê¿ˆ (ì…ë ¥ì°½ì—ì„œ) |
| Escape | ëª¨ë‹¬ ë‹«ê¸° |
| Space/Enter | ë²„íŠ¼ í™œì„±í™” |

### 7.2 ARIA ì†ì„±

```tsx
// MessageList
<div role="log" aria-live="polite" aria-label="ëŒ€í™” ë‚´ìš©">

// MessageItem
<div role="article" aria-label={`${role === 'assistant' ? 'GM' : 'ë‚˜'}ì˜ ë©”ì‹œì§€`}>

// ChatInput
<textarea aria-label="ë©”ì‹œì§€ ì…ë ¥" placeholder="ë‹¹ì‹ ì˜ í–‰ë™ì„ ì…ë ¥í•˜ì„¸ìš”...">

// SendButton
<button aria-label="ë©”ì‹œì§€ ì „ì†¡" disabled={isLoading}>

// LoadingIndicator
<div role="status" aria-label="GMì´ ì‘ë‹µì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤">
```

### 7.3 ìƒ‰ìƒ ëŒ€ë¹„

| ìš”ì†Œ | ì „ê²½ìƒ‰ | ë°°ê²½ìƒ‰ | ëŒ€ë¹„ìœ¨ |
|------|--------|--------|--------|
| ë³¸ë¬¸ í…ìŠ¤íŠ¸ | #f3f4f6 (gray-100) | #111827 (gray-900) | 15.1:1 âœ“ |
| GM ë©”ì‹œì§€ | #f3f4f6 | #581c87/50 (purple-900) | 8.2:1 âœ“ |
| ë²„íŠ¼ í…ìŠ¤íŠ¸ | #ffffff | #7c3aed (purple-600) | 4.6:1 âœ“ |
| íƒ€ì„ìŠ¤íƒ¬í”„ | #6b7280 (gray-500) | #111827 | 5.3:1 âœ“ |

---

## 8. ì—ëŸ¬ ì²˜ë¦¬ UI

### 8.1 ì—ëŸ¬ ìƒíƒœ

| ì—ëŸ¬ ìœ í˜• | UI í‘œì‹œ |
|-----------|---------|
| **API í˜¸ì¶œ ì‹¤íŒ¨** | "ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”." ë©”ì‹œì§€ + ì¬ì‹œë„ ë²„íŠ¼ |
| **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜** | "ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”." í† ìŠ¤íŠ¸ ì•Œë¦¼ |
| **ì…ë ¥ ê²€ì¦ ì‹¤íŒ¨** | ì…ë ¥ì°½ í…Œë‘ë¦¬ ë¹¨ê°„ìƒ‰ + "500ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”" |

### 8.2 ì—ëŸ¬ ë©”ì‹œì§€ ì»´í¬ë„ŒíŠ¸

```tsx
// ì¸ë¼ì¸ ì—ëŸ¬ (ë©”ì‹œì§€ ëª©ë¡ì— í‘œì‹œ)
<div className="flex gap-3 max-w-[80%]">
  <div className="w-8 h-8 rounded-full bg-red-500 flex items-center justify-center">
    âš ï¸
  </div>
  <div className="bg-red-900/50 border border-red-700 rounded-2xl px-4 py-3">
    <p className="text-red-200">ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
    <button className="text-red-300 underline mt-2">ë‹¤ì‹œ ì‹œë„</button>
  </div>
</div>
```

---

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 ì»´í¬ë„ŒíŠ¸ ìµœì í™”

| ìµœì í™” ê¸°ë²• | ì ìš© ìœ„ì¹˜ | ì´ìœ  |
|-------------|-----------|------|
| `React.memo` | MessageItem | ì´ì „ ë©”ì‹œì§€ ë¦¬ë Œë”ë§ ë°©ì§€ |
| `useCallback` | sendMessage, startNewGame | í•¨ìˆ˜ ì°¸ì¡° ì•ˆì •í™” |
| `useMemo` | ë©”ì‹œì§€ ëª©ë¡ í•„í„°ë§ ì‹œ | ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€ |

### 9.2 ì´ë¯¸ì§€ ìµœì í™”

- ì•„ì´ì½˜: ì´ëª¨ì§€ ì‚¬ìš© (ì™¸ë¶€ ì´ë¯¸ì§€ ì—†ìŒ)
- ë°°ê²½: CSS ê·¸ë¼ë°ì´ì…˜ ì‚¬ìš©
- ë¡œê³ : SVG ì¸ë¼ì¸ ë˜ëŠ” ì´ëª¨ì§€

### 9.3 ë²ˆë“¤ í¬ê¸° ìµœì í™”

- í•„ìˆ˜ ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜
- Tree shaking í™œìš©
- ì˜ˆìƒ ë²ˆë“¤ í¬ê¸°: < 150KB (gzipped)

---

## 10. í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 10.1 ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

- [ ] í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ ID ìƒì„±
- [ ] ì˜¤í”„ë‹ ë©”ì‹œì§€ ìë™ í‘œì‹œ
- [ ] ë©”ì‹œì§€ ì…ë ¥ ë° ì „ì†¡
- [ ] AI ì‘ë‹µ ìˆ˜ì‹  ë° í‘œì‹œ
- [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ
- [ ] ìë™ ìŠ¤í¬ë¡¤
- [ ] ìƒˆ ê²Œì„ ë²„íŠ¼ ë™ì‘
- [ ] ìƒˆ ê²Œì„ í™•ì¸ ëª¨ë‹¬

### 10.2 ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸

- [ ] ë°ìŠ¤í¬í†± (1920px)
- [ ] ë…¸íŠ¸ë¶ (1366px)
- [ ] íƒœë¸”ë¦¿ (768px)
- [ ] ëª¨ë°”ì¼ (375px)
- [ ] ëª¨ë°”ì¼ ê°€ë¡œ ëª¨ë“œ

### 10.3 ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸

- [ ] Chrome (ìµœì‹ )
- [ ] Safari (ìµœì‹ )
- [ ] Firefox (ìµœì‹ )
- [ ] Edge (ìµœì‹ )
- [ ] iOS Safari
- [ ] Android Chrome

---

**Note**: ì´ IA ë¬¸ì„œëŠ” 3ì‹œê°„ MVP ê°œë°œì„ ìœ„í•œ ë‹¨ì¼ í˜ì´ì§€ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ë³µì¡í•œ ë¼ìš°íŒ…ì´ë‚˜ ë‹¤ì¤‘ í˜ì´ì§€ ì—†ì´ í•˜ë‚˜ì˜ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ì—ì„œ ëª¨ë“  ê¸°ëŠ¥ì´ ë™ì‘í•©ë‹ˆë‹¤.
